require=function t(e,o,i){function n(c,h){if(!o[c]){if(!e[c]){var r="function"==typeof require&&require;if(!h&&r)return r(c,!0);if(s)return s(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){var o=e[c][1][t];return n(o||t)},l,l.exports,t,e,o,i)}return o[c].exports}for(var s="function"==typeof require&&require,c=0;c<i.length;c++)n(i[c]);return n}({blackpoint:[function(t,e,o){"use strict";cc._RF.push(e,"e672aixHw1NeoONB189lB2W","blackpoint"),cc.Class({extends:cc.Component,properties:{light:{default:null,type:cc.Node},game:{default:null,type:cc.Node}},onLoad:function(){console.log(this.getComponent(cc.RigidBody).enabledContactListener),this.getComponent(cc.RigidBody).enabledContactListener=!0,this.myLight=this.light.getComponent("myLight")},onBeginContact:function(t,e,o){console.log("On Collision enter!2"),this.game.getComponent("game").gameOver()},update:function(t){if(Math.sqrt((this.light.x-this.node.x)*(this.light.x-this.node.x)+(this.light.y-this.node.y)*(this.light.y-this.node.y))<300){var e=this.light.getComponent(cc.RigidBody),o=Math.atan2(this.light.y-this.node.y,this.light.x-this.node.x),i=cc.v2(-300*e.getMass()*Math.cos(o),-300*e.getMass()*Math.sin(o));e.applyForceToCenter(i)}},start:function(){}}),cc._RF.pop()},{}],bluemirror:[function(t,e,o){"use strict";cc._RF.push(e,"b85cd6f5llFVLdtJhrdA2OI","bluemirror"),cc.Class({extends:cc.Component,properties:{},onCollisionEnter:function(t,e){console.log("On Collision enter!"),console.log(t.node.getComponent("myLight"))},start:function(){}}),cc._RF.pop()},{}],cameracontrol:[function(t,e,o){"use strict";cc._RF.push(e,"ec0b8V9ATZDS6KeWkXk894v","cameracontrol"),cc.Class({extends:cc.Component,properties:{hero:{default:null,type:cc.Node}},update:function(t){this.node.y=this.hero.y},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"bbd0fMj33VP5YNVJBmtkjeJ","game"),cc.Class({extends:cc.Component,properties:{light:{default:null,type:cc.Node},bluemirror:{default:null,type:cc.Node},redmirror:{default:null,type:cc.Node},mirror:{default:null,type:cc.Node},overpage:{default:null,type:cc.Node},overButton:{default:null,type:cc.Button},score:{default:null,type:cc.Label},stage:{default:null,type:cc.Node}},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onMouseDown,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onMouseUp,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.onMouseUp,this),this.overButton.node.on("click",this.gameRestart,this),this.overpage.y=-1e3,this.light.enabled=!0,this.myLight=this.light.getComponent("myLight"),this.mouseDownX=0,this.mouseDownY=0,this.gameisover=!1,this.mirrortype=0},onMouseDown:function(t){console.log("Down!"),this.mouseDownX=t.getLocationX(),this.mouseDownY=t.getLocationY()},onMouseUp:function(t){console.log("Up!"),this.mouseUpX=t.getLocationX(),this.mouseUpY=t.getLocationY();var e=180*Math.atan2(this.mouseDownY-this.mouseUpY,this.mouseDownX-this.mouseUpX)/Math.PI;if(this.mirrortype){var o=cc.instantiate(this.redmirror);o.y=(this.mouseDownY+this.mouseUpY-this.node.height)/2+this.light.y,o.x=(this.mouseDownX+this.mouseUpX-this.node.width)/2,this.mirror.addChild(o)}else{var i=cc.instantiate(this.bluemirror);i.y=(this.mouseDownY+this.mouseUpY-this.node.height)/2+this.light.y,i.x=(this.mouseDownX+this.mouseUpX-this.node.width)/2,i.rotation=-e,this.mirror.addChild(i)}},onKeyUp:function(t){t.keyCode},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.w:this.mirrortype^=1;break;case cc.KEY.s:this.myLight.myRotate(-1)}},gameOver:function(){this.light.destroy(),this.gameisover=!0,this.overpage.y=0},gameRestart:function(){console.log("hahaha"),cc.director.loadScene("game")},update:function(t){this.gameisover||((this.light.x>270||this.light.x<-270)&&this.gameOver(),this.score.string=(this.mirrortype?"Red":"Blue")+"Score:"+(Math.floor(this.light.y/10)+41))},start:function(){}}),cc._RF.pop()},{}],myLight:[function(t,e,o){"use strict";cc._RF.push(e,"9d3dfugW+BM15ow+kNAgogc","myLight"),cc.Class({extends:cc.Component,properties:{speed:300,v:0,parent:{default:null,type:cc.Node},orbit:{default:null,type:cc.Node},orbitCenter:{default:null,type:cc.Node},parentCenter:{default:null,type:cc.Node}},update:function(t){var e=cc.instantiate(this.orbit);e.x=this.node.x,e.y=this.node.y,this.parent.addChild(e),setTimeout(function(){e.destroy()}.bind(this),3e3);var o=cc.instantiate(this.orbitCenter);o.x=this.node.x,o.y=this.node.y,this.parentCenter.addChild(o),setTimeout(function(){o.destroy()}.bind(this),3e3)},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],redmirror:[function(t,e,o){"use strict";cc._RF.push(e,"97130CHTjZFkIEH+kjBPo64","redmirror"),cc.Class({extends:cc.Component,properties:{f:60},onBeginContact:function(t,e,o){if(console.log("On Collision enter!red"),!this.isIn){this.myLight=o.getComponent("myLight");var i=this.myLight.node.getComponent(cc.RigidBody),n=i.linearVelocity,s=this.node.x-this.myLight.node.x,c=Math.atan(s/this.f+n.x/n.y),h=Math.max(Math.sqrt(n.x*n.x+n.y*n.y),this.myLight.speed);n.x=h*Math.sin(c),n.y=n.y>0?h*Math.cos(c):-h*Math.cos(c),i.linearVelocity=n,this.isIn=!0}},onLoad:function(){this.getComponent(cc.RigidBody).enabledContactListener=!0,this.isIn=!1,this.t=0},update:function(t){this.isIn?(this.t+=t,this.t>1&&(this.isIn=!1)):this.t=0},start:function(){}}),cc._RF.pop()},{}],stage:[function(t,e,o){"use strict";cc._RF.push(e,"0b7847SAW1MVYILpxzC8hp0","stage"),cc.Class({extends:cc.Component,properties:{blackhole:{default:null,type:cc.Node},light:{default:null,type:cc.Node}},update:function(t){if(this.light.y-this.lasty>1e3){var e=cc.instantiate(this.blackhole);this.blackls.push(e),e.x=400*Math.random()-200,e.y=this.light.y+1e3,this.lasty=this.light.y,this.node.addChild(e),console.log(e)}this.blackls.length>0&&this.blackls[this.nowi].y<this.light.y-1e3&&(this.blackls[this.nowi].destroy(),this.nowi++)},onLoad:function(){this.nowi=0,this.lasty=0,this.blackls=[]},start:function(){}}),cc._RF.pop()},{}]},{},["blackpoint","bluemirror","cameracontrol","game","myLight","redmirror","stage"]);