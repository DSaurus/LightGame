require=function t(e,i,o){function n(c,h){if(!i[c]){if(!e[c]){var r="function"==typeof require&&require;if(!h&&r)return r(c,!0);if(s)return s(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){var i=e[c][1][t];return n(i||t)},l,l.exports,t,e,i,o)}return i[c].exports}for(var s="function"==typeof require&&require,c=0;c<o.length;c++)n(o[c]);return n}({blackpoint:[function(t,e,i){"use strict";cc._RF.push(e,"e672aixHw1NeoONB189lB2W","blackpoint"),cc.Class({extends:cc.Component,properties:{light:{default:null,type:cc.Node},game:{default:null,type:cc.Node}},onLoad:function(){console.log(this.getComponent(cc.RigidBody).enabledContactListener),this.getComponent(cc.RigidBody).enabledContactListener=!0,this.myLight=this.light.getComponent("myLight"),this.c=300},onBeginContact:function(t,e,i){console.log("On Collision enter!2"),this.game.getComponent("game").gameOver()},update:function(t){if(Math.sqrt((this.light.x-this.node.x)*(this.light.x-this.node.x)+(this.light.y-this.node.y)*(this.light.y-this.node.y))<300){var e=this.light.getComponent(cc.RigidBody),i=Math.atan2(this.light.y-this.node.y,this.light.x-this.node.x),o=this.light.getComponent(cc.ParticleSystem);o.startColorVar.a>200?this.c=10:o.startColor.g>245?this.c=600:this.c=300;var n=cc.v2(-this.c*e.getMass()*Math.cos(i),-this.c*e.getMass()*Math.sin(i));e.applyForceToCenter(n)}},start:function(){}}),cc._RF.pop()},{}],bluemirror:[function(t,e,i){"use strict";cc._RF.push(e,"b85cd6f5llFVLdtJhrdA2OI","bluemirror"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.getComponent(cc.RigidBody).enabledContactListener=!0,this.isIn=!1,this.t=0},onBeginContact:function(t,e,i){if(console.log("On Collision enter!red"),!this.isIn){this.getComponent(cc.Animation).play("bluemirror"),this.myLight=i.getComponent("myLight");var o=this.myLight.node.getComponent(cc.RigidBody),n=o.linearVelocity,s=Math.sqrt(n.x*n.x+n.y*n.y),c=Math.max(s,this.myLight.speed);n.x=n.x/s*c,n.y=n.y/s*c,o.linearVelocity=n;var h=i.getComponent(cc.ParticleSystem);h.startColor=cc.color(52,101,175,255),h.startColorVar=cc.color(0,0,0,0),this.isIn=!0}},update:function(t){this.isIn?(this.t+=t,this.t>.5&&(this.isIn=!1)):this.t=0},start:function(){}}),cc._RF.pop()},{}],cameracontrol:[function(t,e,i){"use strict";cc._RF.push(e,"ec0b8V9ATZDS6KeWkXk894v","cameracontrol"),cc.Class({extends:cc.Component,properties:{hero:{default:null,type:cc.Node}},update:function(t){this.node.y=this.hero.y},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],diamond:[function(t,e,i){"use strict";cc._RF.push(e,"cf92estDsJJJInPgm29Ep5a","diamond"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.getComponent(cc.RigidBody).enabledContactListener=!0,this.isIn=!1,this.t=0},onBeginContact:function(t,e,i){if(console.log("On Collision enter!red"),!this.isIn){this.myLight=i.getComponent("myLight");var o=this.myLight.node.getComponent(cc.RigidBody),n=o.linearVelocity,s=Math.sqrt(n.x*n.x+n.y*n.y),c=Math.max(s,this.myLight.speed);n.x=n.x/s*c,n.y=n.y/s*c,o.linearVelocity=n;var h=i.getComponent(cc.ParticleSystem);h.startColorVar=cc.color(255,255,255,255),h.startColor=cc.color(0,0,0,255),this.isIn=!0}},update:function(t){this.isIn?(this.t+=t,this.t>.5&&(this.isIn=!1)):this.t=0},start:function(){}}),cc._RF.pop()},{}],fasimirror:[function(t,e,i){"use strict";cc._RF.push(e,"80070CnFjFEQZHuUtbvIAtj","fasimirror"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.getComponent(cc.RigidBody).enabledContactListener=!0,this.isIn=!1,this.t=0},onBeginContact:function(t,e,i){if(console.log("On Collision enter!wtf"),!this.isIn){this.myLight=i.getComponent("myLight");var o=this.myLight.node.getComponent(cc.RigidBody),n=o.linearVelocity,s=Math.sqrt(n.x*n.x+n.y*n.y),c=Math.max(s,this.myLight.speed);n.x=-c*Math.cos(this.node.rotation/180*Math.PI),n.y=c*Math.sin(this.node.rotation/180*Math.PI),o.linearVelocity=n;var h=i.getComponent(cc.ParticleSystem);h.startColorVar=cc.color(0,0,0,0),h.startColor=cc.color(100,255,100,255),this.isIn=!0}},update:function(t){this.isIn?(this.t+=t,this.t>.5&&(this.isIn=!1)):this.t=0},start:function(){}}),cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"bbd0fMj33VP5YNVJBmtkjeJ","game"),cc.Class({extends:cc.Component,properties:{light:{default:null,type:cc.Node},bluemirror:{default:null,type:cc.Node},redmirror:{default:null,type:cc.Node},diamond:{default:null,type:cc.Node},fasimirror:{default:null,type:cc.Node},mirror:{default:null,type:cc.Node},overpage:{default:null,type:cc.Node},overButton:{default:null,type:cc.Button},score:{default:null,type:cc.Label},stage:{default:null,type:cc.Node}},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onMouseDown,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onMouseUp,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.onMouseUp,this),this.overButton.node.on("click",this.gameRestart,this),this.overpage.y=-1e4,this.light.enabled=!0,this.myLight=this.light.getComponent("myLight"),this.mouseDownX=0,this.mouseDownY=0,this.gameisover=!1,this.mirrortype=0},onMouseDown:function(t){console.log("Down!"),this.gameisover||t.getLocationY()<100||(this.mouseDownX=t.getLocationX(),this.mouseDownY=t.getLocationY(),this.isMouseDown=!0)},onMouseUp:function(t){if(console.log("Up!"),this.isMouseDown&&!(this.gameisover||t.getLocationY()<100)){this.mouseUpX=t.getLocationX(),this.mouseUpY=t.getLocationY();var e=180*Math.atan2(this.mouseDownY-this.mouseUpY,this.mouseDownX-this.mouseUpX)/Math.PI;if(2===this.mirrortype){var i=cc.instantiate(this.diamond);i.y=(this.mouseDownY+this.mouseUpY-this.node.height)/2+this.light.y,i.x=(this.mouseDownX+this.mouseUpX-this.node.width)/2,this.stage.addChild(i)}else if(3===this.mirrortype){var o=cc.instantiate(this.fasimirror);o.y=(this.mouseDownY+this.mouseUpY-this.node.height)/2+this.light.y,o.x=(this.mouseDownX+this.mouseUpX-this.node.width)/2,o.rotation=-e,this.stage.addChild(o)}else if(0===this.mirrortype){var n=cc.instantiate(this.bluemirror);n.y=(this.mouseDownY+this.mouseUpY-this.node.height)/2+this.light.y,n.x=(this.mouseDownX+this.mouseUpX-this.node.width)/2,n.rotation=-e,this.stage.addChild(n)}else{var s=cc.instantiate(this.redmirror);s.y=(this.mouseDownY+this.mouseUpY-this.node.height)/2+this.light.y,s.x=(this.mouseDownX+this.mouseUpX-this.node.width)/2,this.stage.addChild(s)}this.isMouseDown=!1}},onKeyUp:function(t){t.keyCode},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.w:this.mirrortype^=1;break;case cc.KEY.s:this.myLight.myRotate(-1)}},gameOver:function(){this.myLight.myDestroy(),this.gameisover=!0,this.overpage.y=0},gameRestart:function(){this.myLight.rebirth(),console.log(this.stage),this.stage.removeAllChildren(),this.overpage.y=-1e4,this.stage.getComponent("stage").onLoad(),setTimeout(function(){this.gameisover=!1}.bind(this),1e3)},update:function(t){this.gameisover||((this.light.x>270||this.light.x<-270)&&this.gameOver(),this.score.string=(this.mirrortype?"Red":"Blue")+"Score:"+(Math.floor(this.light.y/10)+41))},start:function(){}}),cc._RF.pop()},{}],mirrorgroup:[function(t,e,i){"use strict";cc._RF.push(e,"40305nNUF9A9pv0uIby7kcU","mirrorgroup"),cc.Class({extends:cc.Component,properties:{redmirror:{default:null,type:cc.Node},bluemirror:{default:null,type:cc.Node},fasi:{default:null,type:cc.Node},diamond:{default:null,type:cc.Node},game:{default:null,type:cc.Node}},myClear:function(){this.bluemirror.opacity=100,this.redmirror.opacity=100,this.diamond.opacity=100,this.fasi.opacity=100},mouseDown:function(t){t.getLocationX()<190?(console.log("1"),this.myClear(),this.bluemirror.opacity=255,this.game.getComponent("game").mirrortype=0):t.getLocationX()<320?(console.log("2"),this.myClear(),this.redmirror.opacity=255,this.game.getComponent("game").mirrortype=1):t.getLocationX()<440?(console.log("3"),this.myClear(),this.diamond.opacity=255,this.game.getComponent("game").mirrortype=2):(console.log("4"),this.myClear(),this.fasi.opacity=255,this.game.getComponent("game").mirrortype=3)},onLoad:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.mouseDown,this),this.node.on(cc.Node.EventType.TOUCH_START,this.mouseDown,this),this.mirrortype=0,this.myClear(),this.bluemirror.opacity=255},start:function(){}}),cc._RF.pop()},{}],myLight:[function(t,e,i){"use strict";cc._RF.push(e,"9d3dfugW+BM15ow+kNAgogc","myLight"),cc.Class({extends:cc.Component,properties:{speed:300,v:0,parent:{default:null,type:cc.Node},orbit:{default:null,type:cc.Node},orbitCenter:{default:null,type:cc.Node},parentCenter:{default:null,type:cc.Node},orbitG:{default:null,type:cc.Node}},rebirth:function(){var t=this.getComponent(cc.RigidBody),e=t.linearVelocity;this.node.x=-37.8,this.node.y=-397.6,e.x=0,e.y=300,t.linearVelocity=e},myDestroy:function(){var t=this.getComponent(cc.RigidBody),e=t.linearVelocity;this.node.x=-1e4,console.log(this.node.x),e.x=e.y=0,t.linearVelocity=e},update:function(t){var e=this.getComponent(cc.ParticleSystem),i=this.getComponent(cc.RigidBody).linearVelocity;e.angle=180+180*Math.atan2(i.y,i.x)/Math.PI;var o=cc.instantiate(this.orbitCenter);o.x=this.node.x,o.y=this.node.y,this.parentCenter.addChild(o),setTimeout(function(){o.destroy()}.bind(this),3e3),this.lastx=this.node.x,this.lasty=this.node.y},onLoad:function(){this.lightx=this.node.x,this.lighty=this.node.y},start:function(){}}),cc._RF.pop()},{}],redmirror:[function(t,e,i){"use strict";cc._RF.push(e,"97130CHTjZFkIEH+kjBPo64","redmirror"),cc.Class({extends:cc.Component,properties:{f:60},onBeginContact:function(t,e,i){if(console.log("On Collision enter!red"),!this.isIn){this.myLight=i.getComponent("myLight");var o=this.myLight.node.getComponent(cc.RigidBody),n=o.linearVelocity,s=this.node.x-this.myLight.node.x,c=Math.atan(s/this.f+n.x/n.y),h=Math.max(Math.sqrt(n.x*n.x+n.y*n.y),this.myLight.speed);n.x=h*Math.sin(c),n.y=n.y>0?h*Math.cos(c):-h*Math.cos(c),o.linearVelocity=n;var r=i.getComponent(cc.ParticleSystem);r.startColor=cc.color(255,100,100,255),r.startColorVar=cc.color(0,0,0,0),this.isIn=!0}},onLoad:function(){this.getComponent(cc.RigidBody).enabledContactListener=!0,this.isIn=!1,this.t=0},update:function(t){this.isIn?(this.t+=t,this.t>1&&(this.isIn=!1)):this.t=0},start:function(){}}),cc._RF.pop()},{}],stage:[function(t,e,i){"use strict";cc._RF.push(e,"0b7847SAW1MVYILpxzC8hp0","stage"),cc.Class({extends:cc.Component,properties:{blackhole:{default:null,type:cc.Node},whitehole:{default:null,type:cc.Node},light:{default:null,type:cc.Node}},update:function(t){if(this.light.y-this.lasty>1e3){var e={};e=Math.random()>.5?cc.instantiate(this.blackhole):cc.instantiate(this.whitehole),this.blackls.push(e),e.x=400*Math.random()-200,e.y=this.light.y+1e3,this.lasty=this.light.y,this.node.addChild(e),console.log(e)}this.blackls.length>0&&this.blackls[this.nowi].y<this.light.y-1e3&&(this.blackls[this.nowi].destroy(),this.nowi++)},onLoad:function(){this.nowi=0,this.lasty=0,this.blackls=[]},start:function(){}}),cc._RF.pop()},{}],whitehole:[function(t,e,i){"use strict";cc._RF.push(e,"c9300PmJ4JJoLoeOP11KiVX","whitehole"),cc.Class({extends:cc.Component,properties:{light:{default:null,type:cc.Node},game:{default:null,type:cc.Node}},onLoad:function(){console.log(this.getComponent(cc.RigidBody).enabledContactListener),this.getComponent(cc.RigidBody).enabledContactListener=!0,this.myLight=this.light.getComponent("myLight"),this.c=300},onBeginContact:function(t,e,i){},update:function(t){if(Math.sqrt((this.light.x-this.node.x)*(this.light.x-this.node.x)+(this.light.y-this.node.y)*(this.light.y-this.node.y))<300){var e=this.light.getComponent(cc.RigidBody),i=Math.atan2(this.light.y-this.node.y,this.light.x-this.node.x),o=this.light.getComponent(cc.ParticleSystem);o.startColorVar.a>200?this.c=10:o.startColor.g>245?this.c=600:this.c=300;var n=cc.v2(this.c*e.getMass()*Math.cos(i),this.c*e.getMass()*Math.sin(i));e.applyForceToCenter(n)}},start:function(){}}),cc._RF.pop()},{}]},{},["blackpoint","bluemirror","cameracontrol","diamond","fasimirror","game","mirrorgroup","myLight","redmirror","stage","whitehole"]);